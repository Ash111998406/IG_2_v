<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Fortune Quiz ‚ô•</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Cormorant+Garamond:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --rose: #ff6b9d;
            --deep-rose: #c44569;
            --blush: #ffeef8;
            --cream: #fff5f7;
            --deep-purple: #543864;
            --text: #2d1b2e;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background: linear-gradient(135deg, var(--blush) 0%, var(--cream) 50%, #ffe9f0 100%);
            color: var(--text);
            min-height: 100vh;
            padding: 40px 20px;
        }

        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        .bg-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .bg-heart {
            position: absolute;
            color: var(--rose);
            opacity: 0.1;
            animation: float-up 15s infinite ease-in-out;
        }

        @keyframes float-up {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.1; }
            90% { opacity: 0.1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .back-btn {
            background: var(--deep-purple);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .back-btn:hover {
            background: var(--deep-rose);
            transform: translateX(-5px);
        }

        .sound-toggle {
            background: white;
            border: 2px solid var(--rose);
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sound-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.2);
        }

        .quiz-container {
            background: white;
            border-radius: 25px;
            padding: 50px;
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.2);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--cream);
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--rose), var(--deep-rose));
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .progress-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.2rem;
            color: var(--deep-purple);
            margin-bottom: 15px;
            text-align: center;
        }

        .question {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--deep-rose);
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            background: var(--cream);
            border: 2px solid var(--rose);
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.2rem;
            text-align: center;
            position: relative;
        }

        .option:hover {
            background: var(--rose);
            color: white;
            transform: translateX(10px);
        }

        .option.selected {
            background: var(--deep-rose);
            color: white;
            border-color: var(--deep-purple);
        }

        .quiz-controls {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 30px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--rose), var(--deep-rose));
            color: white;
        }

        .btn-secondary {
            background: white;
            color: var(--deep-purple);
            border: 2px solid var(--deep-purple);
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .result-container {
            text-align: center;
            animation: scaleIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .result-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .result-container h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--deep-rose);
            margin-bottom: 20px;
        }

        .result-score {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--deep-purple);
            margin-bottom: 20px;
        }

        .result-container p {
            font-size: 1.3rem;
            line-height: 1.8;
            color: var(--text);
            margin-bottom: 30px;
        }

        .dashboard {
            background: var(--cream);
            padding: 30px;
            border-radius: 20px;
            margin-top: 30px;
        }

        .dashboard-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--deep-rose);
            text-align: center;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid var(--rose);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--deep-purple);
            margin-bottom: 5px;
        }

        .stat-value {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--deep-rose);
            font-weight: 700;
        }

        .answer-review {
            margin-top: 20px;
        }

        .answer-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid var(--rose);
        }

        .answer-item strong {
            color: var(--deep-rose);
        }

        .share-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .share-btn {
            padding: 12px 25px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .share-btn.twitter {
            background: #1DA1F2;
            color: white;
        }

        .share-btn.facebook {
            background: #4267B2;
            color: white;
        }

        .share-btn.copy {
            background: var(--deep-purple);
            color: white;
        }

        @media (max-width: 768px) {
            .quiz-container {
                padding: 30px 20px;
            }

            .question {
                font-size: 1.5rem;
            }

            .option {
                font-size: 1.1rem;
                padding: 15px;
            }

            .top-bar {
                flex-direction: column;
                gap: 15px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <canvas id="fireworks-canvas"></canvas>
    <div class="bg-hearts" id="bgHearts"></div>
    
    <div class="container">
        <div class="top-bar">
            <a href="index.html" class="back-btn">‚Üê Back to Home</a>
            <button class="sound-toggle" onclick="toggleSound()" id="soundBtn">
                <span id="soundIcon">üîä</span>
                <span id="soundText">Sound On</span>
            </button>
        </div>
        <div class="quiz-container" id="quiz-content"></div>
    </div>

    <script>
        // Background floating hearts
        function createBgHearts() {
            const container = document.getElementById('bgHearts');
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'bg-heart';
                heart.textContent = '‚ô•';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
                heart.style.animationDelay = Math.random() * 15 + 's';
                heart.style.animationDuration = (Math.random() * 10 + 10) + 's';
                container.appendChild(heart);
            }
        }
        createBgHearts();

        // Sound Management
        let soundEnabled = true;
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(frequency, duration = 100) {
            if (!soundEnabled) return;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration / 1000);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration / 1000);
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('soundIcon').textContent = soundEnabled ? 'üîä' : 'üîá';
            document.getElementById('soundText').textContent = soundEnabled ? 'Sound On' : 'Sound Off';
            if (soundEnabled) playSound(600, 100);
        }

        // Quiz Questions with scoring
        const quizQuestions = [
            {
                question: "How do you feel about commitment?",
                options: [
                    { text: "I'm ready for a serious, long-term relationship", score: 5 },
                    { text: "I'm open to it with the right person", score: 4 },
                    { text: "I prefer to take things slow", score: 3 },
                    { text: "Commitment scares me", score: 1 }
                ]
            },
            {
                question: "What's your ideal Valentine's Day date?",
                options: [
                    { text: "Romantic candlelit dinner", score: 5 },
                    { text: "Adventure and outdoor activities", score: 4 },
                    { text: "Cozy movie night at home", score: 3 },
                    { text: "I'd rather stay single", score: 1 }
                ]
            },
            {
                question: "How do you express love?",
                options: [
                    { text: "Through heartfelt words and affection", score: 5 },
                    { text: "With thoughtful gifts and gestures", score: 4 },
                    { text: "Quality time together", score: 4 },
                    { text: "I don't really express love", score: 1 }
                ]
            },
            {
                question: "What matters most in a relationship?",
                options: [
                    { text: "Trust and loyalty", score: 5 },
                    { text: "Passion and chemistry", score: 4 },
                    { text: "Fun and adventure", score: 3 },
                    { text: "Personal freedom", score: 1 }
                ]
            },
            {
                question: "How do you handle conflicts in relationships?",
                options: [
                    { text: "Talk it through with understanding", score: 5 },
                    { text: "Take time to cool off, then discuss", score: 4 },
                    { text: "Avoid confrontation", score: 2 },
                    { text: "End things if there's too much drama", score: 1 }
                ]
            },
            {
                question: "Your perfect partner is:",
                options: [
                    { text: "My soulmate who completes me", score: 5 },
                    { text: "Someone who shares my values", score: 4 },
                    { text: "A fun companion for adventures", score: 3 },
                    { text: "I don't believe in 'the one'", score: 1 }
                ]
            },
            {
                question: "How important is romance to you?",
                options: [
                    { text: "Extremely - it's the heart of love", score: 5 },
                    { text: "Very important but not everything", score: 4 },
                    { text: "Nice to have occasionally", score: 2 },
                    { text: "Romance is overrated", score: 1 }
                ]
            },
            {
                question: "What's your view on love at first sight?",
                options: [
                    { text: "I believe in it wholeheartedly", score: 5 },
                    { text: "It's possible with strong chemistry", score: 4 },
                    { text: "Love takes time to develop", score: 3 },
                    { text: "It's just physical attraction", score: 1 }
                ]
            }
        ];

        const quizResults = [
            {
                scoreRange: [0, 12],
                title: "üíî Single Forever",
                icon: "üòî",
                message: "You seem to have built walls around your heart. Love requires vulnerability and openness. Perhaps it's time to reconsider what truly matters in life? Remember, even the coldest hearts can thaw with the right warmth.",
                advice: "Try opening up to new experiences and people. Love might surprise you when you least expect it!"
            },
            {
                scoreRange: [13, 20],
                title: "üå± Love Skeptic",
                icon: "ü§î",
                message: "You're hesitant about love, perhaps due to past experiences or personal preferences. While independence is valuable, don't let fear keep you from meaningful connections. Love doesn't always follow a script.",
                advice: "Take small steps toward opening your heart. Start with friendship and see where it leads."
            },
            {
                scoreRange: [21, 28],
                title: "üíï Cautious Romantic",
                icon: "üòä",
                message: "You believe in love but approach it carefully. You're practical yet hopeful, balancing dreams with reality. Your measured approach will help you find someone who truly appreciates you.",
                advice: "Trust your instincts but don't overthink every moment. Sometimes magic happens when we let our guard down."
            },
            {
                scoreRange: [29, 35],
                title: "üíñ True Romantic",
                icon: "üòç",
                message: "Your heart is full of love and hope! You believe in the magic of romance and aren't afraid to express your feelings. Your passionate nature attracts kindred spirits who appreciate genuine affection.",
                advice: "Keep your beautiful outlook while staying grounded. The perfect balance of romance and reality awaits you!"
            },
            {
                scoreRange: [36, 40],
                title: "üëë Soulmate Magnet",
                icon: "ü•∞",
                message: "You are a beacon of love and devotion! Your deep capacity for commitment and genuine romantic spirit makes you irresistible to those seeking true partnership. You don't just believe in soulmates - you embody the qualities that create them.",
                advice: "Your love will inspire others. Stay true to your romantic heart - your perfect match is drawn to exactly who you are!"
            }
        ];

        let currentQuestion = 0;
        let quizAnswers = [];
        let selectedOption = -1;
        let totalScore = 0;

        function startQuiz() {
            currentQuestion = 0;
            quizAnswers = [];
            selectedOption = -1;
            totalScore = 0;
            showQuestion();
        }

        function showQuestion() {
            const container = document.getElementById('quiz-content');
            if (currentQuestion < quizQuestions.length) {
                const q = quizQuestions[currentQuestion];
                const progress = ((currentQuestion) / quizQuestions.length) * 100;
                
                container.innerHTML = `
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-text">Question ${currentQuestion + 1} of ${quizQuestions.length}</div>
                    <h2 class="question">${q.question}</h2>
                    <div class="options">
                        ${q.options.map((opt, idx) => 
                            `<div class="option" onclick="selectOption(${idx})" id="option-${idx}">${opt.text}</div>`
                        ).join('')}
                    </div>
                    <div class="quiz-controls">
                        ${currentQuestion > 0 ? '<button class="btn btn-secondary" onclick="previousQuestion()">‚Üê Previous</button>' : ''}
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" disabled>Next ‚Üí</button>
                    </div>
                `;
                selectedOption = -1;
            } else {
                showQuizResult();
            }
        }

        function selectOption(idx) {
            playSound(800, 150);
            selectedOption = idx;
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById(`option-${idx}`).classList.add('selected');
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (selectedOption === -1) return;
            
            playSound(1000, 200);
            const answer = quizQuestions[currentQuestion].options[selectedOption];
            quizAnswers.push({
                question: quizQuestions[currentQuestion].question,
                answer: answer.text,
                score: answer.score
            });
            totalScore += answer.score;
            
            currentQuestion++;
            selectedOption = -1;
            showQuestion();
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                playSound(600, 150);
                currentQuestion--;
                quizAnswers.pop();
                totalScore = quizAnswers.reduce((sum, ans) => sum + ans.score, 0);
                selectedOption = -1;
                showQuestion();
            }
        }

        function showQuizResult() {
            playSound(1200, 500);
            
            const result = quizResults.find(r => 
                totalScore >= r.scoreRange[0] && totalScore <= r.scoreRange[1]
            );
            
            const maxScore = quizQuestions.length * 5;
            const percentage = Math.round((totalScore / maxScore) * 100);
            
            document.getElementById('quiz-content').innerHTML = `
                <div class="result-container">
                    <div class="result-icon">${result.icon}</div>
                    <h2>${result.title}</h2>
                    <div class="result-score">Your Love Score: ${totalScore}/${maxScore} (${percentage}%)</div>
                    <p>${result.message}</p>
                    <p><strong>üí° Advice:</strong> ${result.advice}</p>
                    
                    <div class="dashboard">
                        <div class="dashboard-title">üìä Your Love Profile</div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">Total Score</div>
                                <div class="stat-value">${totalScore}</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Love Level</div>
                                <div class="stat-value">${percentage}%</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Questions</div>
                                <div class="stat-value">${quizQuestions.length}</div>
                            </div>
                        </div>
                        
                        <div class="answer-review">
                            <h3 style="color: var(--deep-rose); margin-bottom: 15px;">Your Answers:</h3>
                            ${quizAnswers.map((ans, idx) => `
                                <div class="answer-item">
                                    <strong>Q${idx + 1}:</strong> ${ans.question}<br>
                                    <span style="color: var(--deep-purple);">‚Üí ${ans.answer} (${ans.score} pts)</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="share-buttons">
                        <button class="share-btn twitter" onclick="shareTwitter()">Share on Twitter</button>
                        <button class="share-btn copy" onclick="copyResult()">Copy Result</button>
                    </div>
                    
                    <button class="btn btn-primary" style="margin-top: 30px;" onclick="startQuiz()">Take Quiz Again ‚ô•</button>
                </div>
            `;
        }

        function shareTwitter() {
            const result = quizResults.find(r => 
                totalScore >= r.scoreRange[0] && totalScore <= r.scoreRange[1]
            );
            const text = `I just took the Love Fortune Quiz and got "${result.title}"! üíï My love score: ${totalScore}/40`;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`, '_blank');
        }

        function copyResult() {
            const result = quizResults.find(r => 
                totalScore >= r.scoreRange[0] && totalScore <= r.scoreRange[1]
            );
            const text = `Love Fortune Quiz Results\n${result.title}\nScore: ${totalScore}/40\n${result.message}`;
            navigator.clipboard.writeText(text).then(() => {
                alert('Result copied to clipboard! üíï');
                playSound(1000, 200);
            });
        }

        // Start the quiz when page loads
        startQuiz();
    </script>

    <script src="fireworks.js"></script>
    <script>
        // Initialize fireworks
        let fireworks = null;
        window.addEventListener('load', () => {
            fireworks = initValentineFireworks();
        });
    </script>
</body>
</html>
